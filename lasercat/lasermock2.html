<!DOCTYPE html>
<!-- saved from url=(0067)https://www.kirupa.com/snippets/examples/move_to_click_position.htm -->
<html class=" -webkit-">
<head>
	<script class="jsbin" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta content="en-us" http-equiv="Content-Language">
	<meta content="lasers" name="keywords">
	<meta content="What this page is about." name="description">
<title>Projectile Demo 1</title>
<style type="text/css">
	html {
		width: 100%;
		height: 100%;
		margin:  0px auto;
    padding: 0px auto;
	}
	body {
		background-image:url('spacelarge.jpg');
		background-repeat: repeat;
		width: 100%;
		height: 100%;
		margin:  0px auto;
    padding: 0px auto;
		overflow: hidden;
	}
	#cat {
		position: absolute;
		background-image:url('cat.gif');
		width: 546px;
		height: 542px;
		bottom: 0px;
		right: 0px;
		z-index: -1;
		margin:  0px auto;
		padding: 0px auto;
	}
</style>
</head>
<body>
	<div id="cat"></div>
	<canvas id="canvas"></canvas>
	<img id="laser" src="laser.gif" style="display:none"></img>
<script src="./lasermock1/prefixfree.min.js.download"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>
(function() {
	// shim layer with setTimeout fallback
	window.requestAnimFrame = (function(){
		return  window.requestAnimationFrame       ||
				window.webkitRequestAnimationFrame ||
				window.mozRequestAnimationFrame    ||
				window.oRequestAnimationFrame      ||
				window.msRequestAnimationFrame     ||
				function(/* function */ callback, /* DOMElement */ element){
						return window.setTimeout(callback, 1000 / 60);
				};
})();

window.cancelRequestAnimFrame = ( function() {
		return window.cancelAnimationFrame            ||
				window.webkitCancelRequestAnimationFrame    ||
				window.mozCancelRequestAnimationFrame         ||
				window.oCancelRequestAnimationFrame        ||
				window.msCancelRequestAnimationFrame        ||
				clearTimeout;
} )();
        var canvas = document.getElementById('canvas'),
            context = canvas.getContext('2d');
								var start1 = {y:0,x:0};
								var start2 = {y:0,x:0};
								var end1 = {y:220,x:100};
								var end2 = {y:220,x:100};
								var amount = 0;
								var request;
								var clickCount = true;
								var cat = document.getElementById('cat').getBoundingClientRect(),
										bottom = cat.bottom,
										right = cat.right;
								// resize the canvas to fill browser window dynamically
								window.addEventListener('resize', resizeCanvas, false);
								init();
        function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                draw1();
								draw2();
        }
        resizeCanvas();
				function init(){

				$('body').click(function(e) {
				//	 if(clickCount) {
						 context.clearRect(0, 0, canvas.width, canvas.height);
						 start1.x = cat.right-322 ;
						 start1.y = cat.bottom-228 ;
						 start2.x = cat.right-179 ;
						 start2.y = cat.bottom-205 ;
						 end1.x = e.pageX;
						 end1.y = e.pageY;
						 end2.x = e.pageX;
						 end2.y = e.pageY;
						 animate();
						 clickCount = false;

				//	 }
				/*	 else {

						 end1.x = e.pageX;
						 end1.y = e.pageY;
						 end2.x = e.pageX;
						 end2.y = e.pageY;
						 animate();
						 clickCount = true;
					 }*/
				 });
				}
				function animate() {
					request = requestAnimFrame(animate, canvas);
					draw1();
					draw2();
				}
				function draw1() {
					cat = document.getElementById('cat').getBoundingClientRect(),
					bottom = cat.bottom,
					right = cat.right;
  				console.log('running');
					amount += 0.05; // change to alter duration
    			if (amount > 1) amount = 1;
    			context.clearRect(0, 0, canvas.width, canvas.height);
    			context.lineWidth=20;
    			context.strokeStyle="red";
					context.lineCap="round";
    			context.beginPath();
    			context.moveTo(cat.right-322, cat.bottom-228);
    			var newX1 = start1.x + (end1.x - start1.x) * amount;
    			var newY1 = start1.y + (end1.y - start1.y) * amount;
    			console.log('newX #1 - '+newX1+' - '+'newY #1 - '+newY1);
    			console.log('end.x #1 - '+end1.x+' - '+'end.y #1 - '+end1.y);
    			context.lineTo(newX1 , newY1);
    			context.stroke();
					context.lineWidth=12;
    			context.strokeStyle="#ff6363";
					context.lineCap="round";
					context.stroke();
					context.lineWidth=5;
    			context.strokeStyle="white";
					context.lineCap="round";
					context.stroke();
				}
				function draw2() {
					cat = document.getElementById('cat').getBoundingClientRect(),
					bottom = cat.bottom,
					right = cat.right;
					amount += 0.05; // change to alter duration
					if (amount > 1) amount = 1;
			//		context.clearRect(0, 0, canvas.width, canvas.height);
					context.lineWidth=20;
					context.strokeStyle="red";
					context.beginPath();
					context.lineCap="round";
					context.moveTo(cat.right-179, cat.bottom-205);
					var newX2 = start2.x + (end2.x - start2.x) * amount;
					var newY2 = start2.y + (end2.y - start2.y) * amount;
					console.log('newX #2 - '+newX2+' - '+'newY #2 - '+newY2);
					console.log('end.x #2 - '+end2.x+' - '+'end.y #2 - '+end2.y);
					context.lineTo(newX2 , newY2);
					context.stroke();
					context.lineWidth=12;
    			context.strokeStyle="#ff6363";
					context.lineCap="round";
					context.stroke();
					context.lineWidth=5;
    			context.strokeStyle="white";
					context.lineCap="round";
					context.stroke();
					if(newX2 === end2.x && newY2 === end2.y) {
						cancelRequestAnimFrame(request);
						console.log('fin');
						request = null;
						amount = 0;
					}
				}
})();

</script>
</body>
</html>
