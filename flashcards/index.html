<html>

<head>
    <title>
        simple flashcards in JS
    </title>
    <link href="fc.css" rel="stylesheet" type="text/css">
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js" type="text/javascript"></script> -->


</head>

<body>
    <script type="text/javascript">
        var cardAdd, flash, nextCard, prevCard, emptyDeck, front, back, card1, card2, card3, formFront, formBack, submit, flip, clearDeck;
        var myCards = [];
        var cardIndex = 0;
        $(window).on("load", function() {
            function Card(term, definition, category) {
                this.term = term;
                this.definition = definition;
                //this.category = category;
            }
            front = document.getElementById("front");
            back = document.getElementById("back");
            flip = document.getElementById("flip");
            submit = document.getElementById("submit");
            clearDeck = document.getElementById("clearDeck");
            card1 = new Card("Lexical Environment", "Where code sits in relation to any surrounding code", "General");
            card2 = new Card("Execution Context", "How, Why, When, and Where code is executed", "General");
            card3 = new Card("JSON", "JavaScript Object Notation, for storing objects and their enclosed data. Often referred to as Key Value Pairs", "Objects");
            myCards = [card1, card2, card3];
            cardIndex = 0;
            front.innerHTML = myCards[cardIndex].term;
            back.innerHTML = myCards[cardIndex].definition;
            back.style.visibility = "hidden";

            flash = function flash() {
                if (front.style.visibility !== "hidden") {
                    front.style.visibility = "hidden";
                    back.style.visibility = "visible";
                } else {
                    front.style.visibility = "visible";
                    back.style.visibility = "hidden";
                }
            };

            cardAdd = function cardAdd(formFront, formBack) {

                function clearForm() {
                    document.getElementById("newTerm").value = "";
                    document.getElementById("newDef").value = "";
                    document.getElementById("cardForm").reset();
                }

                function updatePlaceholder() {
                    document.getElementById("newTerm").placeholder = "...another term?";
                    document.getElementById("newDef").placeholder = "...and another definition?";
                }

                formFront = document.getElementById("newTerm");
                formBack = document.getElementById("newDef");
                if (
                    formFront.value !== formBack.value &&
                    formFront.value !== "" &&
                    formBack.value !== ""
                ) {
                    var newCard = new Card();
                    newCard.term = formFront.value;
                    newCard.definition = formBack.value;
                    myCards.push(newCard);
                    activeCard = myCards[(myCards.length - 1)];
                    clearForm();
                    updatePlaceholder();
                    front.innerHTML = activeCard.term;
                    back.innerHTML = activeCard.definition;
                    // back.style.visibility = "hidden"; 
                } else if (formFront.value == formBack.value) {
                    alert('kinda defeats the purpose of a "flash" card doesn\'t it?');
                } else if ((
                        formFront.value === null || formFront.value === "",
                        formBack.value === null || formBack.value === "",
                        formFront.value === null || formBack.value === null ||
                        formFront.value === "" || formBack.value === ""
                    )) {
                    alert("Fill out both sides of the card, ya dringus!");
                }
                document.getElementById("newTerm").focus();
            };

            nextCard = function nextCard() {
                cardIndex = (cardIndex + 1) % myCards.length;
                front.innerHTML = myCards[cardIndex].term;
                back.innerHTML = myCards[cardIndex].definition;
            }

            prevCard = function prevCard() {
                if (cardIndex > 0) cardIndex = cardIndex - 1;
                else if (cardIndex == 0) cardIndex = myCards.length - 1;
                front.innerHTML = myCards[cardIndex].term;
                back.innerHTML = myCards[cardIndex].definition;
            }

            emptyDeck = function emptyDeck() {
                var confirmation = confirm("Are you sure you want to delete this entire deck?");
                if (confirmation) {
                    myCards.splice(0, myCards.length);
                    cardIndex = 0;
                    front.innerHTML = "&nbsp;";
                    back.innerHTML = "&nbsp;";
                }
                document.getElementById("newTerm").focus();
            };

            document.addEventListener("keyup", function(event) {
                event.preventDefault();
                if (event.keyCode == 37) {
                    prevCard();
                } else if (event.keyCode == 39) {
                    nextCard();
                } else if (event.keyCode == 38 || event.keyCode == 40) {
                    flash();
                }
                if (event.keyCode == 46) {
                    emptyDeck();
                }
                // if (event.keyCode==9 && !(document.activeElement == document.getElementById("newTerm")) { // document.getElementById("newTerm"); // } });
                // function cardSelect(myCards, cardIndex) {
                //     var selectCards = document.getElementById("selectCards");
                //     var options = selectCards.appendElement("");
                //     options.map(myCards.keys);
            });
        })
    </script>

    <h1>Create Your Own Flashcard Deck for Studying!</h1>
    <br>
    <br>
    <h4 style="width:100%; text-align:center;margin-top:-50px;">check out the new hotkeys: L/R Arrow Keys for previous/next, Up/Down for front/back, Enter for adding a card, and Delete for clearing the deck (after a prompt)! </h4>
    <div id="front">
        <!-- term lives here   -->
    </div>
    <br>
    <hr>
    <br>
    <div id="back">
        <!-- definition lives here   -->
    </div>
    <br>
    <div id="activeCardButtons">
        <button id="prev" onclick="prevCard()">Previous Card
    </button>
        <button id="flip" type="button" value="Flip" onclick="flash()">
        Flip</button>
        <button id="next" onclick="nextCard()">Next Card
    </button>
    </div>
    <br>
    <br>
    <br>
    <div id="formContainer">
        <form id="cardForm">
            <input id="newTerm" type="text" placeholder="Add your own term or concept..." onkeydown="if(event.keyCode==13) document.getElementById('newDef').focus()">
            <input id="newDef" type="text" placeholder="...give it a definition, then click the button to..." onkeydown="if(event.keyCode==13) cardAdd()">
            <br>
            <input id="submit" type="button" value="add it to the deck!" onclick="cardAdd()">
            <br>
            <input id="clearDeck" type="button" value="Click HERE to clear the deck!" onclick="emptyDeck()">
        </form>
        <br>
    </div>
    <select id="selectCards" style="display:none;">

</select>

</body>

</html>